<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text to Speech Converter</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
        }
        textarea {
            width: 80%;
            height: 150px;
            margin-bottom: 10px;
            font-size: 16px;
        }
        select, button {
            padding: 10px;
            font-size: 16px;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <h1>Text to Speech Converter</h1>
    <textarea id="textInput" placeholder="Enter your text here..."></textarea><br>
    <select id="audioFormat">
        <option value="mp3">MP3</option>
        <option value="wav">WAV</option>
    </select><br><br>
    <button onclick="generateAudio()">Generate and Download Audio</button>

    <script>
        function generateAudio() {
            const text = document.getElementById("textInput").value;
            const format = document.getElementById("audioFormat").value;

            if (!text.trim()) {
                alert("Please enter some text.");
                return;
            }

            const url = `/generate_audio/?text=${encodeURIComponent(text)}&format=${format}`;

            // Send request to backend and handle response
            fetch(url)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Error generating audio');
                    }
                    return response.blob();
                })
                .then(blob => {
                    const url = window.URL.createObjectURL(blob);
                    const a = document.createElement("a");
                    a.href = url;
                    a.download = `speech.${format}`;
                    a.click();
                })
                .catch(error => {
                    console.error(error);
                    alert("An error occurred while generating the audio.");
                });
        }
    </script>
</body>
</html>
